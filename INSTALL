Dependencies
============

 * bash
 * eject
 * Optional: udisks2

 * inotify-tools (optional auditing)
 * ntfs-3g (if using ntfs drives)

bashmount-au should work on all supported distributions with lsblk. Tested on RHEL6 & RHEL7.


Installation
============

1. As root, copy "bashmount-au" to "/usr/bin" or any other location in $PATH:

        install -m700 bashmount-au /usr/bin/bashmount-au

2. Backup any existing configuration files.

3. As root, copy "bashmount-au.conf" to "/etc/bashmount-au.conf" for global
   configuration:

        install -m600 bashmount-au.conf /etc/bashmount-au.conf

4. As root, copy "mediawatch.sh" to /usr/bin/mediawatch.sh

	install -m600 mediawatch.sh /usr/bin/mediawatch.sh

5. Optionally, copy "bashmount-au.conf" to "$HOME/.config/bashmount-au/config"
   for per-user configuration:

        mkdir -p $HOME/.config/bashmount-au/
        install -m600 bashmount-au.conf $HOME/.config/bashmount-au/config

6. Optionally, copy "bashmount-au.1" to "/usr/share/man/man1":

        gzip -9 bashmount-au.1
        install -m644 bashmount-au.1.gz /usr/share/man/man1/bashmount-au.1.gz

7. Make life a bit easier by setting an alias in "$HOME/.bashrc":

        alias mount='bashmount-au'


Configuration
=============

1. Disable autofs and gnome-automount & auto_run according to your distributions directions.

2. Create a group for data transfer personnel and assign designated personnel (ie. dta)

3. Configure /etc/sudoers file and assign group to run bashmount-au. (ie. %dta ALL=(ALL) /usr/bin/bashmount-au)

4. Configure /etc/bashmount-au.conf for desired checks and logfile (must create this file). Default is all strict checks. See config file for explanation and variable settings including optional second authentication.

5. Verify or change existing mount command to restrict to root. Remove all mounting of external devices in /etc/fstab.

6. Install inotify-tools from EPEL repository.

7. You should also set audit.rules and/or aide.conf watches on bashmount-au, bashmount-au.conf, and mediawatch.sh files.
